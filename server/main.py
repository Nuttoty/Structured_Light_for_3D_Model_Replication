import threading
import tkinter as tk

# นำเข้าส่วนประกอบหลัก (Components) ของโปรแกรมตระกูลสแกน 3D ควบคุมทั้งระบบ Flask แบบจำลอง
from server import run_flask
from gui import ScannerGUI

def main():
    # ----------------------------------------------------------------
    # หน้าต่างเริ่มต้นของฟังก์ชัน (Entry Point) ที่ระบบทำการรันต้อนรับผู้ใช้งาน
    # ----------------------------------------------------------------
    print("----------------------------------------------------------------")
    print("   Project 3D Scanner Controller v2.1 (With 360 Radial Fix)")
    print("----------------------------------------------------------------")
    
    # เปิดการทำงานของเว็บเซิร์ฟเวอร์แบบคู่ขนานเบื้องหลัง (Thread Daemon) เพื่อรับข้อมูลจากแอปมือถือพร้อมๆกัน
    threading.Thread(target=run_flask, daemon=True).start()
    
    # เรียกวาดจุดศูนย์กลาง (Root) ของหน้าจอ GUI ด้วย Tkinter Library
    root = tk.Tk()
    
    # ส่งหน้าจอเปล่า (Root) ไปให้คลาส ScannerGUI ทำการก่อสร้างตึกอาคารตารางเมนู 6 แถบ
    app = ScannerGUI(root)
    
    # สั่งให้จอของโปรแกรมเข้าสู่สภาวะรอรับผล (Mainloop) ค้างไว้ ป้องกันโปรแกรมปิดตัวเอง
    root.mainloop()

# เรียกใช้งานฟังก์ชัน Main ถ้าสคริปต์นี้เป็นจุดที่ถูกเรียก
if __name__ == "__main__":
    main()
